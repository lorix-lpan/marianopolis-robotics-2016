<h1 class="text-center" style="font-size:2em">Line Track Tutorial</h1>
<h2 class="text-right">Derek Yu & Bilun Sun</h2>
<br>
<p>
  Have you ever wanted to learn how to program your robot to complete a task
  autonomously? What about making it follow a line? Some may find it
  intimidating to create a piece of code that will allow a robot to track a line
  by itself, but it is actually easier than you think. In this simple tutorial,
  we will be using an array of three VEX line trackers, but you can use more if
  you feel like it. The more sensors you have, the better the result. Ready to
  begin? Let’s get started!
</p>
<p>
  The first step is to open a new file. The program we are using here is RobotC,
  ( but the process should be similar.)
</p>
<div hljs>
task main()
{

}
</div>
<p>
  Next, we will set up some motors and sensors. I will use two VEX motors for
  this tutorial: one for the left side, and the other for the right side. Press
  <b>Motor and Sensor Setup</b> near the top.
</p>
<img class="img-responsive" src="../../../../../assets/img/tutorials/tutorial_robot.png">
<p>
  Under the Motors tab, assign a name to your motors found in the corresponding
  ports on your VEX Cortex. Click the Type dropdown next to each motor, and
  select the motor you are using. Then, check the box for Reversed for one of
  your motors. The reason for this is because we want the motors to turn in the
  same direction. Do the same thing to setup your line trackers, which are under
  the VEX 2.0 Analog Sensors 1-8. 
</p>
<p>
  Afterwards, we will define two variables: speed and threshold. The speed
  variable isn’t necessary, but it makes it much easier for you when you decide
  to change the speed at which your motors will run. Pick any speed you want,
  although we recommend starting with a lower speed since it will be easier for
  the robot to follow the line. Once you’ve finished and tested your code, you
  can easily increase the speed to your liking. The next variable, threshold,
  allows the robot to differentiate between the line and the surface. This value
  is obtained experimentally, but a good estimate would be to find the average
  between the minimum and maximum values picked up by the line trackers.
</p>
<p>
  NOTE: The line tracker reads a higher value (between 2000-3000) when it is on a dark/black surface. On a light/white surface, the value is lower (near 200).
</p>
<div hljs>
#pragma config(Sensor, in1,    leftIR,         sensorLineFollower)
#pragma config(Sensor, in2,    middleIR,       sensorLineFollower)
#pragma config(Sensor, in3,    rightIR,        sensorLineFollower)
#pragma config(Motor,  port2,           rightMotor,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           leftMotor,    tmotorVex393_MC29, openLoop, reversed)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

int speed = 50;
int threshold = 1300;

task main()
{

}
</div>
<p>
  Now that everything is set up, it’s time to start the actual code!
</p>
<p>
  The code illustrated above covers only the line following part. If you want
  your robot to stop once the line finishes, you can easily add your own code at
  the end. 
</p>
<p>
  To begin, create a while loop in which we will nest the line following code.
  Notice that the parameter of the while loop is true. We do this because we
  want the code to run continuously. Next, we will need three if statements for
  the robot to determine what to do when moving along the line. Our first if
  statement checks whether the line is to the left of the robot or not. To do
  this, the sensor value of the left line tracker (named leftIR) is compared to
  the threshold value. If the sensor value is smaller than the threshold, then
  the robot skips the code inside the if block and moves on to next if
  statement. However, if the sensor value is larger, then the robot will turn to
  towards the left side. The right line tracker (rightIR) works the same way.
  Otherwise, if only the middle sensor detects the line, then the robot is
  instructed to keep moving straight at the assigned speed. Combining all three
  if statements together in the while loop will result in the robot following
  the line. 
</p>
<div hljs>
#pragma config(Sensor, in1,    leftIR,         sensorLineFollower)
#pragma config(Sensor, in2,    middleIR,       sensorLineFollower)
#pragma config(Sensor, in3,    rightIR,        sensorLineFollower)
#pragma config(Motor,  port2,           rightMotor,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           leftMotor,    tmotorVex393_MC29, openLoop, reversed)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

int speed = 50;
int threshold = 1300;

task main()
{
	while(true){
		if (SensorValue(leftIR) > threshold){ //If line is on the left side, turn robot left
			motor[leftMotor] = 0;
			motor[rightMotor] = speed;
		}

		if (SensorValue(middleIR) > threshold){
			motor[leftMotor] = speed;
			motor[rightMotor] = speed;
		}

		if (SensorValue(rightIR) > threshold){
			motor[leftMotor] = speed;
			motor[rightMotor] = 0;
		}
	}
}
</div>
